# Transfer Files to dbGaP

This WDL transfers data to dbGaP. 

## Inputs Table: 
| Input Name                   | Description                                                                                                                                                                                                                                       | Type    | Required | Default   |
|------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------|----------|-----------|
| **sample_id**                | The sample identifier. MUST be unique for a given sample.                                                                                                                                                                                         | String  | Yes      | N/A       |
| **aggregation_project**      | The sample's aggregation project                                                                                                                                                                                                                  | String  | Yes      | N/A       |
| **collaborator_sample_id**   | The collaborator sample ID                                                                                                                                                                                                                        | String  | Yes      | N/A       |
| **data_type**                | The data type - this should be uniform for ALL samples being processed. One of: "WGS", "Exome", or "RNA"                                                                                                                                          | String  | Yes      | N/A       |
| **workspace_name**           | The workspace name                                                                                                                                                                                                                                | String  | Yes      | N/A       |
| **workspace_project**        | The workspace billing project                                                                                                                                                                                                                     | String  | Yes      | N/A       |
| **uploadSite**               | The Aspera upload site to copy the files to (i.e. "gap-submit.ncbi.nlm.nih.gov" in most cases)                                                                                                                                                    | String  | Yes      | N/A       |
| **uploadPath**               | The path within the Aspera site (i.e. "protected" in most cases)                                                                                                                                                                                  | String  | Yes      | N/A       |
| **key**                      | The GCP path to the SSH key. See [here](https://github.com/broadinstitute/submissions?tab=readme-ov-file#ssh-key-creation-and-usage-guide) for directions on creating the key                                                                     | FileRef | Yes      | N/A       |
| **dataFile**                 | The path to the aggregation (i.e the bam or cram path)                                                                                                                                                                                            | FileRef | Yes      | N/A       |
| **md5_file**                 | The path to the aggregation's md5                                                                                                                                                                                                                 | FileRef | Yes      | N/A       |
| **read_group_metadata_json** | The path to the read group metadata. Use this ONLY for DRAGEN samples where read-group level data is not uploaded to the Terra metadata tables. For non-DRAGEN samples, read-group level metadata MUST be available in the Terra metadata tables. | FileRef | No       | N/A       |
| **aggregation_version**      | The aggregation version. For DRAGEN samples, set this to 1. For non-DRAGEN samples, set this to the actual aggregation version.                                                                                                                   | Int     | Yes      | N/A       |
| **phs_id**                   | The phs ID for all the samples                                                                                                                                                                                                                    | String  | Yes      | N/A       |
| **monitoring_script**        | The path to a monitoring script (used for debugging memory and disk shortages)                                                                                                                                                                    | FileRef | No       | N/A       |
